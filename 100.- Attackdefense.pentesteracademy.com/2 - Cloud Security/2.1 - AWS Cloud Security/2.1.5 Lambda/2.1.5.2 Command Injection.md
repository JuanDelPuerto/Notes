Serverless Architecture is said to be more secure compared to traditional architectures. However, this does not mean attacks cannot be performed on it.Â 

In this lab, we will learn how a vulnerable lambda function can be leveraged to perform a privileged operation  

**Objective:** Identify the command Injection vulnerability, leverage it to get hold of temporary access credentials and interact with the S3 buckets on the AWS account.

=========================================================================

Uploading a file and capturing the request with Burpsuite.
![[Pasted image 20210921091320.png]]

Performing command injection in filename to dump environment variables
`POST /Prod/api/file/Copy-Pates%20README HTTP/1.1` -->
`POST /Prod/api/file/Copy-Pates%20README;printenv HTTP/1.1`
We get environment variables in the response. In this particular case, we obtain the role's access key and secret.

Accessing discovered s3 bucket
Using Role's access key, secret key and tokent to accesse the bucket
![[Pasted image 20210921092954.png]]
