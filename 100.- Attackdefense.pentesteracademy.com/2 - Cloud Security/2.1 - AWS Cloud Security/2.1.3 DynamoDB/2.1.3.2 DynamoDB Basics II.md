Amazon DynamoDB is a NoSQL Database which supports key-value and document store. In this lab exercise, a DynamoDB endpoint is running on the target machine.

**Objective:**Â  Interact with the DynamoDB endpoint and perform the following tasks:

1.  Identify the data type of the attribute "features" in the items stored in table "products"?
2.  Identify the partition key and sort key of table "cards".
3.  Find the value stored in attribute "NameOnCard" in table "cards" where the primary key has the value "36" and sort key has value "5188-9354-2769-1431"?  
4.  Find out the number of products which have a rating of more than 4.5?
5.  Delete the order with OrderId "15" from the "orders" table.
6.  Delete table "orders" from the DynamoDB server.

================================================================

1.  Identify the data type of the attribute "features" in the items stored in table "products"?
> Scan the products table
> `aws --endpoint http://192.168.10.3:4567 dynamodb scan --table products --projection-expression "features" --max-items 1`
> ![[Pasted image 20210904215602.png]]
> The datatype of attribute features is map

2.  Identify the partition key and sort key of table "cards".
>  `aws --endpoint http://192.168.10.3:4567 dynamodb describe-table --table cards`
>  The userid is primary and Cardnumber is sort key

3.  Find the value stored in attribute "NameOnCard" in table "cards" where the primary key has the value "36" and sort key has value "5188-9354-2769-1431"?  
> Create a JSON to pass userid and card number as attribute
> ![[Pasted image 20210905083940.png]]
> Query the table and find the number of cards owned by the user
>  `aws --endpoint http://192.168.10.3:4567 dynamodb query --table cards --key-condition-expression "UserId = :value1 and CardNumber = :value2" --expression-attribute-values file:///root/attribute_values.json`
>  The name on the card is Brynne Guthrie

4.  Find out the number of products which have a rating of more than 4.5?
> Check the datatype of rating attribute
>  `aws --endpoint http://192.168.10.3:4567 dynamodb scan --table products --max-items 1`
>  The name of the attribute is rating and data type is number
>  Create a JSON file to store the value of Rating attribute
>  ![[Pasted image 20210905084540.png]]
>  Use the scan subcommand and retrieve the items
>   `aws --endpoint http://192.168.10.3:4567 dynamodb scan --table products --filter-expression "Rating > :value" --expression-attribute-values file:///root/attribute_values.json`
>   There are 4 products who have rating above 4.5

5.  Delete the order with OrderId "15" from the "orders" table.
> Create a JSON required to delete the order with order id 15
> ![[Pasted image 20210905084915.png]]
> Delete the item
>  `aws --endpoint http://192.168.10.3:4567 dynamodb delete-item --table orders --key file:///root/key.json`
>  Verify if the item was deleted or not
>   `aws --endpoint http://192.168.10.3:4567 dynamodb get-item --table orders --key file:///root/key.json`

6.  Delete table "orders" from the DynamoDB server.
> Delete the table orders
>  `aws --endpoint http://192.168.10.3:4567 dynamodb delete-table --table orders`
>  Check if the table was deleted
>   `aws --endpoint http://192.168.10.3:4567 dynamodb list-tables`



