Amazon DynamoDB is a NoSQL Database which supports key-value and document store. In this lab exercise, a DynamoDB endpoint is running on the target machine.  

**Objective:**Â  Interact with the DynamoDB endpoint and perform the following tasks:

1.  List all the tables stored on the DynamoDB server.
2.  Find out the number of items stored in the table "users"?  
3.  Find out the UserId of user "Amber Patrick"?
4.  Find out the name of the product which has ProductID '9'?    
5.  Add an item in the "products" table with an XSS payload specified in the description attribute. 
6.  Modify an item in the "products" table and inject an XSS payload in the description of the product.
7.  Perform a batch operation and inject XSS payload in the description of any 3 products.

================================================================

Use awscli to retrieve the list of tables stored on dynomodb
`aws --endpoint http://192.253.238.3:4567 dynamodb list-tables`
Number of items on a table
`aws --endpoint http://192.253.238.3:4567 dynamodb scan --table users`
User ID from an user
> Create a json file to find the user id
> ![[Pasted image 20210903154206.png]]
> Scan the table and retrieve the userID
> `aws --endpoint http://192.253.238.3:4567 dynamodb scan --table users --filter-expression "UserName = :value" --projection-expression "UserId" --expression-attribute-values file:///root/attribute_value.json`

Get the name of an ID of product
> `aws --endpoint http://192.253.238.3:4567 dynamodb describe-table --table products`
> The productId is the primary key of the table
> Create a json file to find the information about the product id
> ![[Pasted image 20210903160011.png]]
> `aws --endpoint http://192.253.238.3:4567 dynamodb query --table products --key-condition-expression "ProductId = :value" --expression-attribute-values file:///root/attribute_value.json`
> The name of the product is Iphone X

Adding an item
> Create a json file to insert an item
> ![[Pasted image 20210903160402.png]]
> Inject the XSS payloadn in the Description field
> Put the items in the products table
> `aws --endpoint http://192.253.238.3:4567 dynamodb put-item --table products --item file:///root/item.json`
> Create a json file to retrieve the information of uploaded products
> ![[Pasted image 20210903160712.png]]
>  `aws --endpoint http://192.253.238.3:4567 dynamodb get-item --table products --key file:///root/key.json`

Modify an item
> Save a json file with a producId
> ![[Pasted image 20210903160929.png]]
> Create a json file to update the product description with XSS payload
> ![[Pasted image 20210903161034.png]]
> Update the description of the item
>  `aws --endpoint http://192.253.238.3:4567 dynamodb update-item --table products --key file:///root/key.json --update-expression "SET ProductDescription = :value" --expression-attribute-values file:///root/attribute_value.json`
>  Check whether the item was updated successfully
>   `aws --endpoint http://192.253.238.3:4567 dynamodb get-item --table products --key file:///root/key.json`

Perform a batch operation and inject XSS payload in the description of any 3 products
> Create a JSON file required to perform batch operations
> ![[Pasted image 20210903161513.png]]
> The JSON will update description of product id 2,3,4
> Perform the batch write operation
>  `aws --endpoint http://192.253.238.3:4567 dynamodb batch-write-item --request-items --file file:///root/items.json`
>  Create a JSON file to check the updates on product id 2,3,4
>  ![[Pasted image 20210903161822.png]]
>  Scan the products table and check the product description
>   `aws --endpoint http://192.253.238.3:4567 dynamodb scan --table products --filter-expression "ProductId = :value1 or ProductId = :value2 or ProductId = :value3" --projection-expression "ProductDescription" --expression-attribute-values file:///root/attribute_value.json`





