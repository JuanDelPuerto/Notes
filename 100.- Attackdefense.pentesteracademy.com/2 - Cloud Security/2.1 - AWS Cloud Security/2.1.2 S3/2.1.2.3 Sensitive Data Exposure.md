S3 is commonly used for storing static resources required by web applications. In such cases, the static resource will require public read permission. While providing public read permission to the bucket, the bucket policy has to be crafted very carefully.

In this lab, we will take a look at how an S3 bucket used by a web application might reveal sensitive information.  

**Objective:** Retrieve a sensitive file from the S3 bucket and leverage it to fetch the user details.   

**URL:** https://uyphi3oonj.execute-api.ap-southeast-1.amazonaws.com/default

==================================================================

Enumerating the S3 bucket as anonymous user
`aws s3 --no-sign-request --region ap-southeast-1 ls s3://lab-webapp-static-resources`
![[Pasted image 20210726154858.png]]

Trying to download the backup.sh script
`aws s3 --no-sign-request --region ap-southeast-1 cp s3://lab-webapp-static-resources/scripts/backup.sh ./`

In this case, the script reveals an API endopoint and the API-key
![[Pasted image 20210726155141.png]]

The script was able to retrieve user details
![[Pasted image 20210726155252.png]]


